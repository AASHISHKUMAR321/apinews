<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>register</title>
    <link rel="stylesheet" href="styles/signup.css">
</head>
<body>
  
    <div id="container"></div>
    <hr>
    <div id="aut_home"></div>
   
</body>
</html>

<script type="module">
    import aut_nav from "./components/aut_nav.js";
    import signUpScreen from "./components/signUpScreen.js";
    // import register from "./components/register.js";
    let cont_div=document.getElementById('container');
    let aut_home=document.getElementById('aut_home');
    cont_div.innerHTML=aut_nav();
    aut_home.innerHTML=signUpScreen();

    let signUp_btn=document.getElementById('signup');
    let login_btn=document.getElementById('login');




    signUp_btn.onclick=()=>{
        register(event);
        console.log('clicked');
        
    }
    login_btn.onclick=()=>{
        
        window.location.href="user_login.html";
        
    }
    async function register(event){

        try{
        event.preventDefault();
        var register_data={
            name:document.getElementById('name').value,
            email:document.getElementById('email').value,
            password:document.getElementById('password').value,
            username:document.getElementById('username').value,
            mobile:"8978675645",
            description:'ker da bhai',

        }
        register_data=JSON.stringify(register_data);
        console.log(register_data);
        }
        catch(err){
        console.log(err);
        }


        let url=`https://masai-api-mocker.herokuapp.com/auth/register`;
        let response=await fetch(url,{

            method:"POST",
            body:register_data,
            headers:{
                "Content-Type":"application/json",
            }
        });

        let result=await response.json();
        
        if(result.error==true){
            alert(result.message);
        }
        else{
            alert(result.message);
            window.location.href="user_login.html";
        }
        

       
        
    }



    

    
</script>